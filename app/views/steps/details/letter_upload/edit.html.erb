<% title t('.page_title') %>
<% step_header %>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <%= govuk_error_summary %>

    <%= render partial: 'steps/shared/document_upload/letter_upload_header' %>

    <div id="document_upload_main_container" class="uploaded_doc_<%= uploaded_document?(@form_object.document_key) %>">
      <%= step_form @form_object, html: {class: 'ga-fileUpload'}, data: {ga_category: 'letter', ga_label: i18n_letter_type} do |f| %>

        <%= document_upload_field(f, @form_object.document_key, label_text: t("shared.letter_upload.attach_document.#{i18n_letter_type}_html")) %>

        <% unless uploaded_document?(@form_object.document_key) %>
          <div class="govuk-form-group util_mt-large">
            <%= f.label :having_problems_uploading, class: 'block-label selection-button-checkbox', 'data-target': 'unable_to_upload_panel' do %>
              <%= f.govuk_check_box :having_problems_uploading, class: 'ga-checkbox', 'data-ga-label': 'having problems single' %>
              <%= t '.having_problems_uploading' %>
            <% end %>

            <div id="unable_to_upload_panel" class="panel js-hidden" aria-hidden="true">
              <%= t 'shared.file_upload.explanation_html', contact_url: contact_page_path %>
              <%=f.govuk_text_area :having_problems_uploading_explanation %>
            </div>
          </div>
        <% end %>

        <%= render partial: 'steps/shared/continue_or_save', locals: {f: f} %>
      <% end %>

      <%= display_current_document(@form_object.document_key) %>
    </div>

  </div>
</div>
